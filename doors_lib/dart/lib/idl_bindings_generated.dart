// ignore_for_file: always_specify_types
// ignore_for_file: camel_case_types
// ignore_for_file: non_constant_identifier_names

// AUTO GENERATED FILE, DO NOT EDIT.
//
// Generated by `package:ffigen`.
// ignore_for_file: type=lint
import 'dart:ffi' as ffi;

/// Bindings for `../rust/ffi_rpc/include/ffi_rpc.h`.
///
/// Regenerate bindings with `dart run ffigen --config ffigen.yaml`.
///
class IdlBindings {
  /// Holds the symbol lookup function.
  final ffi.Pointer<T> Function<T extends ffi.NativeType>(String symbolName) _lookup;

  /// The symbols are looked up in [dynamicLibrary].
  IdlBindings(ffi.DynamicLibrary dynamicLibrary) : _lookup = dynamicLibrary.lookup;

  /// The symbols are looked up with [lookup].
  IdlBindings.fromLookup(ffi.Pointer<T> Function<T extends ffi.NativeType>(String symbolName) lookup) : _lookup = lookup;

  Bytes init(CallBack callback) {
    return _init(callback);
  }

  late final _initPtr = _lookup<ffi.NativeFunction<Bytes Function(CallBack)>>('init');
  late final _init = _initPtr.asFunction<Bytes Function(CallBack)>();

  Bytes un_init() {
    return _un_init();
  }

  late final _un_initPtr = _lookup<ffi.NativeFunction<Bytes Function()>>('un_init');
  late final _un_init = _un_initPtr.asFunction<Bytes Function()>();

  Bytes call(int method_idd, ffi.Pointer<Bytes> in_parameter) {
    return _call(method_idd, in_parameter);
  }

  late final _callPtr = _lookup<ffi.NativeFunction<Bytes Function(ffi.Uint64, ffi.Pointer<Bytes>)>>('call');
  late final _call = _callPtr.asFunction<Bytes Function(int, ffi.Pointer<Bytes>)>();

  void bytes_free(Bytes data) {
    return _bytes_free(data);
  }

  late final _bytes_freePtr = _lookup<ffi.NativeFunction<ffi.Void Function(Bytes)>>('bytes_free');
  late final _bytes_free = _bytes_freePtr.asFunction<void Function(Bytes)>();
}

final class Bytes extends ffi.Struct {
  @ffi.Uint64()
  external int len;

  @ffi.Uint64()
  external int capacity;

  @ffi.Uint64()
  external int offset;

  external ffi.Pointer<ffi.Uint8> bytes;
}

/// 回调用函数的返回值在dart中并不支持，所以没有返回值
typedef CallBack = ffi.Pointer<ffi.NativeFunction<CallBackFunction>>;
typedef CallBackFunction = ffi.Void Function(Bytes);
typedef DartCallBackFunction = void Function(Bytes);
